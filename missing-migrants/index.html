<!DOCTYPE html>
<html>

<head>
    <title> Missing Migrants </title>
    <!-- Import Vega & Vega-Lite (does not have to be from CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>

    <!-- Import pure.css -->
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css"
        integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Google font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather&family=Nunito&family=Open+Sans&family=Playfair+Display:wght@900&display=swap" rel="stylesheet">

    <!-- CSS file -->
    <link rel="stylesheet" type="text/css" href="css/styles.css" media="all">


</head>

<body>

    <div class="page">

        <!-- VIS TITLE AND SUBTITLE -->
        <div class="pure-g section-container">
            <div class="pure-u-1-1" style="text-align: center">
                <h1>Global Missing Migrants</h1>
                <p class="subtitle">Every year, thousands of migrants go missing all around the world, with most cases involve deaths due to various reasons.
                    <br/> This visualization explores the challenges associated with global migration that have, at large, been unknown
                    to the public.</p>
            </div>
        </div>
        <!-- end pure grid group -->

        <!-- HEADING 1: LOCATION -->
        <div class="pure-g section-container">
            <div class="pure-u-1-1" style="text-align: center">
                <h2 class="section-header"> Location </h2>
                <p class="subtitle"> Where are the most dangerous areas / regions for migration? Let's have a look at the specific routes and destinations. </p>
            </div>
        </div>
        <!-- end pure grid group -->

        <div class="section-container">
            <!-- INCIDENT LOCATION MAP -->
            <div class="pure-g">
                <div class="pure-u-1-1">
                    <div id="map_incident_location" class="vis-container"></div>
                </div>
            </div>
            <!-- end pure grid group -->

            <!-- MIGRATION ROUTE BAR -->
            <div class="pure-g">
                <div class="pure-u-1-3">
                    <div class="description description-left">
                        <p> Global migration happens all around the world, but the most popular and seemingly also the most dangerous routes are
                            <strong>US-Mexico border, Sahara desert crossing and Central Mediterranean</strong>. 
                            <br/><br/> These regions witness the highest number of incidents where migrants either go missing or dead from 2014 to 2023.
                            <br/><br/> For migrants from <strong>Central America</strong>, moving up to North America (the US) poses many <strong>deadly challenges</strong> from 
                            crossing the Chihuahuan desert, drowning in the canals to crimes such as kidnapping.
                        </p>
                    </div>
                </div>
                <div class="pure-u-2-3">
                    <div id="migration_route" class="vis-container"></div>
                </div>
            </div>
            <!-- end pure grid group -->

            <!-- ORIGIN -- INCIDENT LOCATION -->
            <div>
                <h3 style="text-align: center;"> Top 3 Most Dangerous Destination for: </h3>
            </div>
            <div class="pure-g">
                <div class="pure-u-1-3">
                    <div id="origin_centralamerica" class="vis-container"></div>
                </div>
                <div class="pure-u-1-3">
                    <div id="origin_latin" class="vis-container"></div>
                </div>
                <div class="pure-u-1-3">
                    <div id="origin_southasia" class="vis-container"></div>
                </div>
            </div>
            <!-- end pure grid group -->
        </div>

        <!-- HEADING 2: BY AGE / GENDER -->
        <div class="pure-g section-container">
            <div class="pure-u-1-1" style="text-align: center">
                <h2 class="section-header"> Deaths & Missing </h2>
                <p class="subtitle"> Let's have a look at the number of affected migrants and the nature of incidents over the years. </p>
            </div>
        </div>
        <!-- end pure grid group -->

        <div class="section-container">

            <!-- GROUP OF LINE CHARTS  -->
            <div class="pure-g">
                <div class="pure-u-2-3">
                    <div id="line_chart_selection"></div>
                    <select id="chart-select">
                        <option value="./json/victim_count_death_missing.vg.json">Death vs Missing</option>
                        <option value="./json/survival_rate.vg.json">Survival Rate</option>
                        <option value="./json/victim_count_gender.vg.json">Age & Gender</option>
                    </select>
                </div>
                <div class="pure-u-1-3">
                    <div class="description description-right">
                        <p class="subtitle"> *Select chart to view from drop-down list.</p>
                        <p> Starting from 2015, casualties due to migration has always exceeded the number of missings. 2022 sees a <strong>sudden surge</strong> in
                            both death and missing counts, which is directly linked to the significant increase in overall global migration due to 
                            issues arising <strong>post-pandemic and the Russia-Ukraine conflict</strong>.
                            <br/><br/> Despite such major increase, 2019 was the "deadliest" year for migration with a survival rate as low as <strong>47%</strong>. 
                            <br/>It is also the case that the majority of migrants involved in incidents are <strong>Male</strong>, though there was 
                            an unusually high number of Female victims in 2018.
                        </p>
                    </div>
                </div>
            </div>
            <!-- end pure grid group -->

            <!-- DEATH BY MIG ROUTE -->
            <div class="pure-g">
                <div class="pure-u-1-1">
                    <div id="death_route" class="vis-container"></div>
                </div>
            </div>
            <!-- end pure grid group -->

            <!-- ANNOTATION -->
            <div class="pure-g">
                <div class="pure-u-1-3">
                    <p> Some text </p>
                </div>
                <div class="pure-u-1-3">
                    <p> Some text </p>
                </div>
                <div class="pure-u-1-3">
                    <p> Some text </p>
                </div>
            </div>
            <!-- end pure grid group -->

            <!-- COD BY YEAR -->
            <div class="pure-g">
                <div class="pure-u-1-1">
                    <div id="cod_year" class="vis-container"></div>
                </div>
            </div>
            <!-- end pure grid group -->
        
        </div>

        <br/>
        <br/>
        <br/>
        <div class="pure-g">
            <div class="pure-u-1-1 small-font">
                <p>This visualisation is created by Dang Huong Giang Nguyen.
                    The datasource is <a href="https://raw.githubusercontent.com/Dang-EmmaNguyen/fit3179-studio/main/missing_migrants.csv">Global Missing Migrants</href>.</p>
            </div>
        </div>


    </div> <!-- end page -->

    <script type="text/javascript">

        // Location
        var map = "./json/incident_location_proportion.vg.json";
        var route_bar = "./json/migration_route_casecount.vg.json";
        var origin_america = "./json/origin_central_america.vg.json";
        var origin_latin = "./json/origin_latin_caribbean.vg.json";
        var origin_southasia = "./json/origin_southern_asia.vg.json";

        // Death & Missing
        var age_gender = "./json/victim_count_gender.vg.json";
        var death_route = "./json/death_by_route.vg.json";
        var cod_stacked = "./json/cod_year.vg.json";
        var death_missing = "./json/victim_count_death_missing.vg.json";
        var survival_rate_line = "./json/survival_rate.vg.json";


        vegaEmbed('#map_incident_location', map, { "actions": false }).then(function (result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#line_chart_age_gender', age_gender, { "actions": false }).then(function (result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#migration_route', route_bar, { "actions": false }).then(function (result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#origin_centralamerica', origin_america, { "actions": false }).then(function (result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#origin_latin', origin_latin, { "actions": false }).then(function (result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#origin_southasia', origin_southasia, { "actions": false }).then(function (result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#death_route', death_route, { "actions": false }).then(function (result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#cod_year', cod_stacked, { "actions": false }).then(function (result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#line_chart_death_missing', death_missing, { "actions": false }).then(function (result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

    </script>

    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <script>
    const chartContainer = document.getElementById("line_chart_selection");
    const chartSelect = document.getElementById("chart-select");

    // Create a function to load and render the selected chart
    const loadChart = async (chartPath) => {
        // Clear the existing chart (if any)
        chartContainer.innerHTML = "";

        try {
        // Load the selected JSON file
        const response = await fetch(chartPath);

        if (response.ok) {
            // Parse the JSON file
            const chartSpec = await response.json();

            // Embed the chart using Vega-Embed
            vegaEmbed(chartContainer, chartSpec, { "actions": false });
        } else {
            console.error("Failed to load the JSON file.");
        }
        } catch (error) {
        console.error("An error occurred:", error);
        }
    };

    // Set a default chart (change "chart1.json" to your default chart)
    const defaultChart = "./json/victim_count_death_missing.vg.json";
    chartSelect.value = defaultChart;

    // Load the default chart on page load
    if (defaultChart) {
        loadChart(defaultChart);
    }

    // Listen for changes in the dropdown and load the selected chart
    chartSelect.addEventListener("change", () => {
        const selectedChart = chartSelect.value;
        if (selectedChart) {
            loadChart(selectedChart);
        }
    });
    </script>

    

</body>

</html>